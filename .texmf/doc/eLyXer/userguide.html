<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="http://www.nongnu.org/elyxer/"/>
<meta name="create-date" content="2010-05-13"/>
<link rel="stylesheet" href="lyx.css" type="text/css" media="screen"/>
<title>eLyXer User Guide</title>
</head>
<body>
<div id="globalWrapper">

<h1 class="title">
<img class="embedded" src="elyxer.png" alt="figure elyxer.png" style="max-width: 160px; max-height: 160px; "/>
eLyXer User Guide
</h1>
<h2 class="author">
Alex Fernández (elyxer@gmail.com)
</h2>
<div class="Unindented">

<div class="fulltoc">

<div class="tocheader">
Table of Contents
</div><div class="tocindent">

<div class="toc">
<a class="Link" href="#toc-Section-1">Section 1: The Basics</a>
</div><div class="tocindent">

<div class="toc">
<a class="Link" href="#toc-Subsection-1.1">Subsection 1.1: System Requirements</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-1.2">Subsection 1.2: Installation</a>
</div><div class="tocindent">

<div class="toc">
<a class="Link" href="#toc-Subsubsection*-1">Subsubsection: Download eLyXer</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsubsection*-2">Subsubsection: Using the Installer</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsubsection*-3">Subsubsection: Prepackaged Versions</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsubsection*-4">Subsubsection: Manual Installation</a>
</div></div>

<div class="toc">
<a class="Link" href="#toc-Subsection-1.3">Subsection 1.3: Test Drive</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-1.4">Subsection 1.4: Usage</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-1.5">Subsection 1.5: Image Processing</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-1.6">Subsection 1.6: LyX Integration</a>
</div></div>

<div class="toc">
<a class="Link" href="#toc-Section-2">Section 2: Advanced Use</a>
</div><div class="tocindent">

<div class="toc">
<a class="Link" href="#toc-Subsection-2.1">Subsection 2.1: Command Line Options</a>
</div><div class="tocindent">

<div class="toc">
<a class="Link" href="#toc-Subsubsection*-5">Subsubsection: Adding Options In LyX</a>
</div></div>

<div class="toc">
<a class="Link" href="#toc-Subsection-2.2">Subsection 2.2: CSS</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-2.3">Subsection 2.3: Title</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-2.4">Subsection 2.4: Table Of Contents</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-2.5">Subsection 2.5: Segmenting Pages</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-2.6">Subsection 2.6: HTML Code</a>
</div><div class="tocindent">

<div class="toc">
<a class="Link" href="#toc-Subsubsection*-6">Subsubsection: Character Encodings</a>
</div></div>

<div class="toc">
<a class="Link" href="#toc-Subsection-2.7">Subsection 2.7: Internationalization</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-2.8">Subsection 2.8: Math</a>
</div><div class="tocindent">

<div class="toc">
<a class="Link" href="#toc-Subsubsection*-7">Subsubsection: jsMath</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsubsection*-8">Subsubsection: MathJax</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsubsection*-9">Subsubsection: Client-side Rendering</a>
</div></div>
</div>

<div class="toc">
<a class="Link" href="#toc-Section-3">Section 3: Work in Progress</a>
</div><div class="tocindent">

<div class="toc">
<a class="Link" href="#toc-Subsection-3.1">Subsection 3.1: Known Issues</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-3.2">Subsection 3.2: Contact Information</a>
</div>
<div class="toc">
<a class="Link" href="#toc-Subsection-3.3">Subsection 3.3: Extending eLyXer</a>
</div></div>

<div class="toc">
<a class="Link" href="#toc-Section-4">Section 4: FAQ</a>
</div></div>

</div>
</div>
<h1 class="Section">
<a class="toc" name="toc-Section-1">1</a> The Basics
</h1>
<blockquote class="Quotation">
<i>elixir, n: a substance believed to cure all ills<sup><a class="bibliocite" name="cite-1" href="#biblio-1">1</a></sup>.</i>
</blockquote>
<div class="Unindented">
eLyXer (pronounced <i>elixir</i>) is a LyX to HTML converter. While there are a ton of such projects all over the web, eLyXer has a clear focus on flexibility and elegant output.
</div>
<div class="Indented">
eLyXer (including this guide and all accompanying materials) is licensed under the <a class="URL" href="http://www.gnu.org/licenses/gpl-3.0-standalone.html">GPL version 3</a> or, at your option, any later version. See the <tt>LICENSE</tt> file for details.
</div>
<div class="Indented">
Please visit the <a class="URL" href="index.html">main page</a> to find out about the latest developments.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-1.1">1.1</a> System Requirements
</h2>
<div class="Unindented">
eLyXer requires Python 2.3.4, and should work with versions up to 2.6.<span class="formula"><i>x</i></span>; it will convert documents generated by LyX 1.5.<span class="formula"><i>x</i></span> to 1.6.<span class="formula"><i>y</i></span>. It has been tested on the most common operating systems: on Mac OS X, Linux and Windows, with and without CygWin.
</div>
<div class="Indented">
Resource usage should be quite frugal; eLyXer runs quite happily on my 1st-gen Asus Eee, with its puny Celeron@570MHz and 512 MB of RAM. It should also be fast — the Eee can convert ~200 pages of LyX text in just over 50 seconds. Performance is fairly linear: 200 pages take <span class="formula">10 × </span> as long as 20, so there are no scalability problems. Memory usage stays low even when processing large documents, and conversion can be done on the fly (with <tt>--lowmem</tt>) for even lower memory requirements.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-1.2">1.2</a> Installation
</h2>
<div class="Unindented">
This section looks at how to install eLyXer on your system.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-1"></a>Download eLyXer
</h3>
<div class="Unindented">
First you will need to fetch the official distribution file from the <a class="URL" href="https://savannah.nongnu.org/files/?group=elyxer">download area</a>. Now, there is more than one way to install eLyXe, but all of them start by uncompressing the distributed file to a suitable directory. Just write at the command prompt:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> tar -xzf elyxer-<i>[version]</i>.tar.gz</tt>
</pre>
<div class="Unindented">
Or for the <tt>.zip</tt> version:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> unzip elyxer-<i>[version]</i>.zip</tt>
</pre>
<div class="Unindented">
A directory called <tt>elyxer</tt> should appear, where the main executable file <tt>elyxer.py</tt> resides.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-2"></a>Using the Installer
</h3>
<div class="Unindented">
An installer is provided in the root directory, called <tt>install.py</tt>; it is the recommended way to install eLyXer. To run it just type in a console as root:
</div>
<pre class="LyX-Code">
<tt><span class="blue">#</span> python install.py</tt>
</pre>
<div class="Unindented">
On Windows you can type (as a regular user):
</div>
<pre class="LyX-Code">
<tt><span class="blue">&gt;</span> python.exe install.py</tt>
</pre>
<div class="Unindented">
In any case, the script will look at your Python version and decide if it can install eLyXer as a Python module or as a binary. By default it will install eLyXer as a binary, so you can check if it was installed successfully:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --help</tt>
</pre>
<div class="Unindented">
If it is possible (i.e. if your Python version is above 2.3), it will also install eLyXer as a module:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> python -m elyxer --help</tt>
</pre>
<div class="Unindented">
In any case, a brief help text and the list of command line options should appear.
</div>
<div class="Indented">
In what follows we will assume that eLyXer has been installed as a binary, except where stated; substitute <tt>"elyxer.py"</tt> with <tt>"python -m elyxer"</tt> if your system has eLyXer as a module and you want to use it.
</div>
<div class="Indented">
The installer will also copy existing translation files to your hard drive so that they can be used from within eLyXer for internationalization.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-3"></a>Prepackaged Versions
</h3>
<div class="Unindented">
The easiest way to install eLyXer is if someone has prepackaged it for your system. Some Linux distributions include eLyXer: <a class="URL" href="http://packages.debian.org/squeeze/elyxer">Debian squeeze</a> and <a class="URL" href="http://packages.ubuntu.com/lucid/elyxer">Ubuntu Lucid</a>. In this case eLyXer needs to be run as <tt>"elyxer"</tt>:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer --help</tt>
</pre>
<div class="Unindented">
Another way is with the LyX installer: the <a class="URL" href="http://wiki.lyx.org/Windows/LyXWinInstaller">alternate LyX installer</a> includes eLyXer in the default installation. See <a class="Reference" href="#sub:LyX-Integration">1.6↓</a> for LyX integration.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-4"></a>Manual Installation
</h3>
<div class="Unindented">
If the installer did not work for you, you can manually install it as a module. On Linux go to the elyxer directory and type, as root:
</div>
<pre class="LyX-Code">
<tt><span class="blue">#</span> python setup.py install</tt>
</pre>
<div class="Unindented">
On Windows just type:
</div>
<pre class="LyX-Code">
<tt><span class="blue">&gt;</span> python.exe setup.py install</tt>
</pre>
<div class="Unindented">
On Mac OS X you can use sudo to have permission:
</div>
<pre class="LyX-Code">
<tt><span class="blue">%</span> sudo python setup.py install</tt>
</pre>
<div class="Unindented">
Now you can run eLyXer as a Python module:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> python -m elyxer --help</tt>
</pre>
<div class="Unindented">
The list of command line options should appear. You can also manually copy the file <tt>elyxer.py</tt> to a directory found in the execution path (for instance, <tt>/usr/bin</tt> on Linux or <tt>c:\windows\system32</tt> on Windows).
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-1.3">1.3</a> Test Drive
</h2>
<div class="Unindented">
Now you may want to try to convert the user guide:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --css lyx.css --title "eLyXer User Guide" docs/userguide.lyx docs/userguide2.html</tt>
</pre>
<div class="Unindented">
or, to run eLyXer as a Python module:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> python -m elyxer --css lyx.css --title "eLyXer User Guide" docs/userguide.lyx docs/userguide2.html</tt>
</pre>
<div class="Unindented">
It should generate a working web page identical to the one distributed:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> diff docs/userguide.html docs/userguide2.html</tt>
</pre>
<div class="Unindented">
The typical output will contain just the changed lines, which in this case should be only the header with the file creation date. An example is shown on listing <a class="Reference" href="#alg:diff">1↓</a>.
</div>
<div class="Indented">

<div class="float">
<a class="Label" name="alg:diff"> </a>
<div class="algorithm">

<blockquote class="Quotation">
<tt>7c7</tt>
</blockquote>
<blockquote class="Quotation">
<tt>&lt; &lt;meta name="create-date" content="2009-09-11"/&gt;</tt>
</blockquote>
<blockquote class="Quotation">
<tt>—</tt>
</blockquote>
<blockquote class="Quotation">
<tt>&gt; &lt;meta name="create-date" content="2009-09-12"/&gt;</tt>
</blockquote>
<div class="caption">
Algorithm 1 Example of <tt>diff</tt> output for functionally identical HTML files.
</div>
</div>
</div>
</div>
<div class="Indented">
If nothing else appears (i.e. both files are functionally equal) then everything is working fine. If you have <tt>bash</tt> installed, to test that everything <i>really</i> works fine you can just run the included tests:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> ./run-tests</tt>
</pre>
<div class="Unindented">
It will run a number of test and check the results, so you can see if everything is well. You also need to have installed the command-line tool <tt>diff</tt> to show differences between two files.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-1.4">1.4</a> Usage
</h2>
<div class="Unindented">
eLyXer is a standalone command line tool. It can be invoked from the command line as:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py [options] [source file] [destination file]</tt>
</pre>
<div class="Unindented">
or, again for the module:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> python -m elyxer [options] [source file] [destination file]</tt>
</pre>
<div class="Unindented">
If the source file is omitted then <tt>STDIN</tt> is used; likewise, if no destination file is specified eLyXer will output to <tt>STDOUT</tt>. This allows its use in pipes and other flexible configurations. Some examples:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py file.lyx file.html</tt>
</pre>
<div class="Unindented">
converts <tt>file.lyx</tt> to <tt>file.html</tt>. Debug messages are shown.
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> cat file.lyx | elyxer.py &gt; file.html</tt>
</pre>
<div class="Unindented">
converts <tt>file.lyx</tt> to <tt>file.html</tt>, as before. This time debug messages are not shown.
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py file.lyx | grep "&lt;blockquote&gt;" | wc</tt>
</pre>
<div class="Unindented">
counts all blockquote paragraphs.
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py file.lyx | wget --no-check-certificate --spider -nv -F -i -</tt>
</pre>
<div class="Unindented">
checks all external links in a document recursively. (Local links will appear as unresolved, but they can be ignored.)
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-1.5">1.5</a> Image Processing
</h2>
<div class="Unindented">
HTML pages do not contain images, as PDF documents; rather they have pointers to image locations on disk. (Luckily LyX documents are the same in this respect.) eLyXer will generate pages that point to the same locations as the original images, when they are PNG images. Other image types like Encapsulated PostScript cannot be used directly from within pages. If the ImageMagick package is installed eLyXer will use the <tt>convert</tt> tool to create PNG versions of the images embedded in the document. If it is not installed eLyXer will show an error message and will not try to convert further images.
</div>
<div class="Indented">
Image location is fragile. All images should be placed in the same location (and with the same structure) as the original document; and they should all be referenced relatively to the current document. During conversion from within LyX (in those versions where it is available) image locations can be lost. Your best bet is to do conversion in place.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-1.6">1.6</a> <a class="Label" name="sub:LyX-Integration"> </a>LyX Integration
</h2>
<div class="Unindented">
If you used the eLyXer installer LyX will automatically detect it after reconfiguration. Just make sure that you are running LyX 1.6.5 or later, and click on Tools ▷ Reconfigure.
</div>
<div class="Indented">
LyX should be able to detect if eLyXer was installed as a module or as a binary, or even if it has been installed from a Linux distribution. In any case you can verify that it has been recognized by LyX by opening Tools ▷ Preferences…, going to External formats ▷ Converters, and finding the converter for “LyX -&gt; HTML”. If eLyXer is there, it worked! Now you can convert your documents using View ▷ HTML. Otherwise try to reinstall eLyXer from scratch and then reconfigure LyX.
</div>
<h1 class="Section">
<a class="toc" name="toc-Section-2">2</a> Advanced Use
</h1>
<div class="Unindented">
There are some advanced uses for eLyXer if you want to extract the most of it.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.1">2.1</a> Command Line Options
</h2>
<div class="Unindented">
eLyXer supports a few command line options:
</div>
<div class="Description">
<span class="Description-entry">--help: </span>show command line help.
</div>
<div class="Description">
<span class="Description-entry">--debug: </span>show debug messages. They may help a developer understand your problem.
</div>
<div class="Description">
<span class="Description-entry">--quiet: </span>be quiet and do not output messages (except errors). This way you can avoid the comforting “Parsing line 1000” messages. When STDIN or STDOUT are used (e.g. in a pipeline) <tt>--quiet</tt> is always enabled.
</div>
<div class="Description">
<span class="Description-entry">--nocopy: </span>do not show the copyright notice at the bottom. If there is no author in the document <tt>--nocopy</tt> is always enabled.
</div>
<div class="Description">
<span class="Description-entry">--title "title": </span>change the title of the generated web page.
</div>
<div class="Description">
<span class="Description-entry">--directory "images_dir": </span>look for images in the directory specified.
</div>
<div class="Description">
<span class="Description-entry">--destdirectory "dest_dir": </span>converted images will end up into this directory.
</div>
<div class="Description">
<span class="Description-entry">--css "new.css": </span>change default CSS. See section <a class="Reference" href="#sub:CSS">2.2↓</a>: CSS.
</div>
<div class="Description">
<span class="Description-entry">--version: </span>show version number and date. Use to check which version you are actually running.
</div>
<div class="Description">
<span class="Description-entry">--nofooter: </span>omit the footer message “Document generated by eLyXer” (shown at the bottom).
</div>
<div class="Description">
<span class="Description-entry">--html: </span>generate HTML 4.0 (instead of XHTML). The resulting pages should be easier to import from certain word processors. See section <a class="Reference" href="#sub:HTML-Code">2.6↓</a>: HTML code.
</div>
<div class="Description">
<span class="Description-entry">--unicode: </span>restore full Unicode output. Right now switches midspaces to medium mathematical spaces. See also section <a class="Reference" href="#sub:HTML-Code">2.6↓</a>: HTML code.
</div>
<div class="Description">
<span class="Description-entry">--iso885915: </span>generate a document using ISO-8859-1 encoding. Again, see section <a class="Reference" href="#sub:HTML-Code">2.6↓</a>: HTML code.
</div>
<div class="Description">
<span class="Description-entry">--forceformat ".extension": </span>Force the format implied by the extension (e.g. <tt>".jpg"</tt> for JPEG) for output images.
</div>
<div class="Description">
<span class="Description-entry">--lyxformat: </span>Return the highest LyX version that eLyXer understands. This parameter is provided to help with <tt>lyx2lyx</tt> integration, so that this tool knows if it must convert the file to a lower LyX format.
</div>
<div class="Description">
<span class="Description-entry">--toc: </span>Activate table of contents generation; this option is on by default. See section <a class="Reference" href="#sub:TOC">2.4↓</a>: TOC.
</div>
<div class="Description">
<span class="Description-entry">--toctarget "original.html": </span>Generate a table of contents with links to the original HTML file. See section <a class="Reference" href="#sub:TOC">2.4↓</a>: TOC.
</div>
<div class="Description">
<span class="Description-entry">--target "frame": </span>Add a <tt>target</tt> attribute to every link in the generated HTML, making all links point to the provided frame. Again, see section <a class="Reference" href="#sub:TOC">2.4↓</a>: TOC.
</div>
<div class="Description">
<span class="Description-entry">--lowmem: </span>Activate a low memory mode which does not keep the whole document in memory: conversion is done on the fly. Keep in mind that some features as the TOC will be missing from the generated document.
</div>
<div class="Description">
<span class="Description-entry">--converter "converter": </span><tt></tt>Use the given converter to convert images. Right now only two converters are supported: <tt><b>imagemagick</b></tt> (default) and <tt><b>inkscape</b></tt>. The latter chooses Inkscape as the image converter, instead of the default ImageMagick. Inkscape uses some non-standard extensions so it might be needed to convert SVG images to PNG.
</div>
<div class="Description">
<span class="Description-entry">--numberfoot: </span><tt></tt>Label footnotes using numbers, instead of letters. Useful when bibliographical references are not numbered and therefore cannot be confused with footnotes.
</div>
<div class="Description">
<span class="Description-entry">--jsmath "URL": </span>use the excellent JavaScript library <a class="URL" href="http://www.math.union.edu/locate/jsMath">jsMath</a> at the given URL to pretty-print mathematical equations. See section <a class="Reference" href="#sub:Math">2.8↓</a>.
</div>
<div class="Description">
<span class="Description-entry">--mathjax "URL": </span>use the promising JavaScript library <a class="URL" href="http://www.mathjax.org/">MathJax</a> at the given URL to pretty-print mathematical equations. See also section <a class="Reference" href="#sub:Math">2.8↓</a>.
</div>
<div class="Unindented">
When an option accepts an argument it can be added after a space as <tt>--target <b>"</b>frame<b>"</b></tt>, or with an equals sign as in <tt>--target=<b>"</b>frame<b>"</b></tt>. The quotes are optional and can be useful if your arguments include e.g. spaces.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-5"></a>Adding Options In LyX
</h3>
<div class="Unindented">
To add one of these options so that it is used from within LyX, you have to modify the converter line. To this effect open Tools ▷ Preferences…, go to External formats ▷ Converters, find the converter for “LyX -&gt; HTML” and edit the converter line. It should read something like this:
</div>
<pre class="LyX-Code">
<tt>python -m elyxer --directory $$r $$i $$o</tt>
</pre>
<div class="Unindented">
(By default LyX will prefer to use eLyXer as a module.) If you want to generate pure HTML instead of XHTML, change the line to:
</div>
<pre class="LyX-Code">
<tt>python -m elyxer </tt><b>--html<tt></tt></b> --directory $$r $$i $$o
</pre>
<div class="Unindented">
And so on.
</div>
<div class="Indented">
If eLyXer was only installed as a binary the original line will be:
</div>
<pre class="LyX-Code">
<tt>elyxer.py --directory $$r $$i $$o</tt>
</pre>
<div class="Unindented">
So you will have to change it accordingly.
</div>
<div class="Indented">
LyX 1.6.5 supports a new “extra options” line; however, at this moment it does not work with eLyXer.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.2">2.2</a> CSS<a class="Label" name="sub:CSS"> </a>
</h2>
<div class="Unindented">
HTML output, as generated, can be a bit crude. Some CSS wizardry can go a long way to make eLyXer output look nicer.
</div>
<div class="Indented">
eLyXer tags most elements with the type so you can later modify them using a CSS. The HTML header reads like listing <a class="Reference" href="#alg:CSS">2↓</a>, so the default remote CSS file is used.
</div>
<div class="Indented">

<div class="float">
<a class="Label" name="alg:CSS"> </a>
<div class="algorithm">

<blockquote class="Quotation">
<tt>&lt;head&gt;</tt>
</blockquote>
<blockquote class="Quotation">
<tt>&lt;title&gt;Your title here&lt;/title&gt;</tt>
</blockquote>
<blockquote class="Quotation">
<tt><b>&lt;link rel="stylesheet" href="http://www.nongnu.org/elyxer/lyx.css" type="text/css" media="screen"/&gt;</b></tt>
</blockquote>
<blockquote class="Quotation">
<tt>&lt;/head&gt;</tt>
</blockquote>
<div class="caption">
Algorithm 2 CSS link automatically added to HTML
</div>
</div>
</div>
</div>
<div class="Indented">
This sample CSS file is published on nongnu.org and distributed along with the scripts, <tt>docs/lyx.css</tt>. (You may have found that your document changes its appearance with time — this is the reason. The main author regularly publishes a new, updated version of <tt>lyx.css</tt> on nongnu.org, and all documents using it automatically appear with the changes.)
</div>
<div class="Indented">
To give your document a customized appearance (or for pages to be accessible offline) you probably will want to use your own CSS file; to use it first copy it to the directory where your document resides (e.g. renaming it to <tt>custom.css</tt>), and customize as needed. Then run <tt>elyxer.py</tt> with the following option:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --css=custom.css document.lyx page.html</tt>
</pre>
<div class="Unindented">
This will make the generated <tt>page.html</tt> use your <tt>custom.css</tt> file. The <tt>‘=’</tt> sign between the constant <tt>‘--css’</tt> and the name of the CSS file is optional.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.3">2.3</a> Title
</h2>
<div class="Unindented">
By default the generated web pages have the title “Converted Document”. If a PDF title is found then it is used instead. The proper LyX title (a paragraph of type “Title” embedded in the text) will also be used if found. But when <tt>--lowmem</tt> is in use eLyXer does not try to get the proper title, since it may be found in the middle of the document or not be present at all; scanning for it would mean doing two passes, one to look for the title in all the document and another to output the web page, and <tt>--lowmem</tt> implies on-the-fly conversion to save memory.
</div>
<div class="Indented">
You can change the title of the generated web page with the <tt>--title</tt> option:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --title "My Beautiful Document" document.lyx page.html</tt>
</pre>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.4">2.4</a> Table Of Contents<a class="Label" name="sub:TOC"> </a>
</h2>
<div class="Unindented">
A table of contents (or TOC) can be generated for every converted LyX document. You can optionally also add a target frame to every link. The trick is to combine both options to generate a TOC that links to the original document on a different frame. For example, if the original page is called <tt>page.html</tt> and you generated it with this command:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py document.lyx page.html</tt>
</pre>
<div class="Unindented">
you can generate the TOC linking to this page, and at the same time point it to frame <tt>contents</tt>:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --toc --toctarget page.html --target contents document.lyx page-toc.html</tt>
</pre>
<div class="Unindented">
Then you can put it all together with a simple frameset generated manually. Just remember to place the original document in the frame called <tt>contents</tt>.
</div>
<div class="Indented">

<div class="float">
<a class="Label" name="alg:frameset"> </a>
<div class="algorithm">
<tt>&lt;html&gt;</tt><tt>  &lt;frameset cols="30%,70%"&gt;</tt><tt>    &lt;frame name="toc" src="page-toc.html" /&gt;</tt><tt>    &lt;frame name="contents" src="page.html" /&gt;</tt><tt>  &lt;/frameset&gt;</tt><tt>&lt;/html&gt;</tt>
<div class="caption">
Algorithm 3 An example frameset for TOC navegation
</div>
</div>
</div>
</div>
<div class="Indented">
TOC generation accepts the same options as normal document conversion. For example, if you follow these instructions literally you will notice that the TOC has very wide margins and looks a bit weird; that is because it is using the default CSS. A special CSS file for TOC files is provided in <tt>docs/toc.css</tt>, so better results should be obtained with the <tt>--css</tt> option:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --toc --toctarget page.html --css docs/toc.css --target contents document.lyx page-toc.html</tt>
</pre>
<div class="Unindented">
With a little bit of practice you will be able to generate useful (and nice looking) TOC files. You can see an example for the <a class="URL" href="userguide-frameset.html">user guide</a> (if you are not already looking at it).
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.5">2.5</a> Segmenting Pages
</h2>
<div class="Unindented">
Quite often you don’t want a huge monolithic page, but a set of linked pages. To do so you can use the <tt>--splitpart</tt> option, specifying the level at which eLyXer should split pages. For instance:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --splitpart 1 document.lyx output.html</tt>
</pre>
<div class="Unindented">
will split <tt>document.lyx</tt> into pages at level 1, using <tt>output.html</tt> as the root page. Each page will get a number that starts with <tt>output</tt> and ends with <tt>.html</tt>, with a suffix that depends on the page — <tt>output-2.html</tt> will correspond to the second split part.
</div>
<div class="Indented">
The level corresponding to 1 depends on the document class: books will be split at chapters, but articles will get a section per page. And so on with lower levels.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.6">2.6</a> HTML Code<a class="Label" name="sub:HTML-Code"> </a>
</h2>
<div class="Unindented">
The HTML code generated is technically XHTML Transitional, version 1.0 <sup><a class="bibliocite" name="cite-2" href="#biblio-2">2</a></sup>, using UTF-8 encoding. Some programs have (in this day and age) trouble importing XHTML, notably some popular word processors. To work around this problem and provide more flexible output in general you can output HTML 4.0:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --html document.lyx page-to-import.html</tt>
</pre>
<div class="Unindented">
Again, technically the code generated is HTML 4.01 Transitional <sup><a class="bibliocite" name="cite-3" href="#biblio-3">3</a></sup> using UTF-8 encoding. Both versions should pass the W3C tests <sup><a class="bibliocite" name="cite-4" href="#biblio-4">4</a></sup>. If your particular web page doesn’t pass the tests, then it is a bug and it will be treated as such.
</div>
<div class="Indented">
The CSS file for eLyXer uses some CSS2 features for math structures (fractions, arrays). This makes the output incompatible with older browsers; it requires Microsoft Internet Explorer 7, Firefox 3, Safari 3 or Chrome 1. Check the <a class="URL" href="math.html">Math Showcase</a> to see if your browser can render eLyXer output correctly.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-6"></a>Character Encodings
</h3>
<div class="Unindented">
For better browser compatibility, medium mathematical spaces are substituted in the output with midspaces — improving the output for some popular browsers. If you want your mathematical spaces back, just use the <tt>--unicode</tt> option:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --unicode document.lyx page-to-import.html</tt>
</pre>
<div class="Unindented">
Check out the <a class="URL" href="math-unicode.html">Math Showcase with Unicode</a> to see the results. In the future other non-Unicode substitutions might be used.
</div>
<div class="Indented">
In case you want to use the ISO-8859-15 encoding in your generated document, you can add the <tt>--iso885915</tt> option:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --iso885915 document.lyx page.html</tt>
</pre>
<div class="Unindented">
This will make eLyXer output a document with all non-ASCII characters encoded as <tt>&amp;nbsp;</tt>, <tt>&amp;#x2005;</tt> and so on. This encoding is similar to ISO-8859-1, also called Latin-1, but including the Euro sign. The <a class="URL" href="math-iso885915.html">Math Showcase (ISO-8859-15 edition)</a> has been generated using this option.
</div>
<div class="Indented">
Both encoding options can be combined with <tt>--html</tt> at will.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.7">2.7</a> Internationalization
</h2>
<div class="Unindented">
eLyXer is distributed along with a few translation files. They are automatically regenerated every time <tt>make</tt> is run, and reside in the folder <tt>po/</tt>. Internationalization is done using GNU <tt>gettext</tt>, so every locale is identified by a two-letter code (such as “en” for English and “es” for Spanish). There are two kinds of files: the text <tt>.po</tt> file (which can be found in <tt>po/my.po</tt> for locale “my”), and the binary <tt>.mo</tt> file (found in <tt>po/my/elyxer.po</tt>).
</div>
<div class="Indented">
For internationalization to work properly, Linux distributors should take all binary <tt>.mo</tt> files and place them in the directory corresponding to locale files, which we will call <tt>$localedir</tt>. As <a class="URL" href="http://docs.python.org/library/gettext.html">the Python gettext page</a> explains, this is distribution-dependent: for example on Debian <tt>$localedir</tt> is <tt>/usr/share/locale</tt>, so for locale “es” the correct route would be
</div>
<pre class="LyX-Code">
<tt>/usr/share/locale/es/LC_MESSAGES/elyxer.mo</tt>
</pre>
<div class="Unindented">
Windows distributors on the other hand should place files in <tt>%PYTHONHOME%\share\locale</tt>, for example for locale “es” on a machine where Python is in <tt>C:\python</tt>:
</div>
<pre class="LyX-Code">
<tt>C:\python\share\locale\es\LC_MESSAGES\elyxer.mo</tt>
</pre>
<div class="Unindented">
To generate a new translation file (we will use “my” as an example locale here, corresponding to Burmese): you need to have the GNU <tt>gettext</tt> package installed. Then go to the directory where elyxer.pot resides:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> cd src/conf</tt>
</pre>
<div class="Unindented">
and generate a <tt>.po</tt> file for your locale:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> msginit --output-file=my.po --locale=my</tt>
</pre>
<div class="Unindented">
Then move the file to the <tt>po/</tt> directory:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> mv my.po ../../po/</tt>
</pre>
<div class="Unindented">
and start translating it to Burmese! Once you are done run make from the root directory:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> ./make</tt>
</pre>
<div class="Unindented">
and it will generate the file <tt>po/my/elyxer.mo</tt>. Finally, place this file in
</div>
<pre class="LyX-Code">
<tt>$localedir/my/LC_MESSAGES/elyxer.mo</tt>
</pre>
<div class="Unindented">
and you are done.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-2.8">2.8</a> Math<a class="Label" name="sub:Math"> </a>
</h2>
<div class="Unindented">
Math equations are an important part of what takes LyX apart from other editors, since it supports the full LaTeX feature set — that is, about everything under the sun. Unfortunately, math support is hard to get right. Many developers are focusing on MathML, but at the time of this writing (Q2 2010) support on some common browsers is still missing.
</div>
<div class="Indented">
eLyXer follows its usual minimalistic approach and doesn’t try to be everything to everybody — instead, it supports out of the box a set of usual constructs (fraction, square root) and tries to simulate others (binomial, overbrace). See the <a class="URL" href="math.html">Math showcase</a> for yourself and learn what eLyXer supports and what not.
</div>
<div class="Indented">
For more sophisticated math equations there are a couple of advanced features.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-7"></a>jsMath
</h3>
<div class="Unindented">
The first is to use <a class="URL" href="http://www.math.union.edu/~dpvc/jsMath/welcome.html">jsMath</a>, for which you have to run eLyXer with the option <tt>--jsmath</tt>:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --jsmath jsMath/ math.lyx math-jsmath.html</tt>
</pre>
<div class="Unindented">
It uses the given URL (in this case the relative URL <tt>jsMath/</tt>) to load the required JavaScript files and start rendering. Unfortunately, all JavaScript code has to be loaded from the same domain as the main document, so if you wish to use this method you will have to host jsMath on your site. See the <a class="URL" href="math-jsmath.html">Math showcase (jsMath edition)</a> to see how jsMath improves (or deteriorates) the picture for you.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-8"></a>MathJax
</h3>
<div class="Unindented">
Another possibility is to use <a class="URL" href="http://www.mathjax.org/">MathJax</a>, which is just as simple with the option <tt>--mathjax</tt>:
</div>
<pre class="LyX-Code">
<tt><span class="blue">$</span> elyxer.py --mathjax MathJax/ math.lyx math-jsmath.html</tt>
</pre>
<div class="Unindented">
This option also uses the given URL (now <tt>MathJax/</tt>) to load MathJax from and set it up. Although some code needs to be hosted on the same site as the pages, MathJax uses a feature called web-fonts which can be downloaded from a public server; this is quite easier to host. See the <a class="URL" href="math-mathjax.html">Math showcase (MathJax edition)</a> to see how MathJax fares with eLyXer. Keep in mind that MathJax is still prerelease quality; it should improve greatly during 2010.
</div>
<h3 class="Subsubsection-">
<a class="toc" name="toc-Subsubsection*-9"></a>Client-side Rendering
</h3>
<div class="Unindented">
Something to note is that both jsMath and MathJax are JavaScript libraries; all rendering is done client-side by the user’s browser. This has quite a few advantages:
</div>
<ul>

<li>
Math processing on the server is quite light; equations are basically surrounded by a special tag and left in TeX form.
</li>
<li>
For developers: integration of these libraries is very easy. It took just a few days to integrate both libraries with eLyXer.
</li>
<li>
Both libraries (especially MathJax) are improving all the time thanks to the efforts of Davide P. Cervone and the rest of the developer team; eLyXer and its users reap the benefits readily.
</li>
<li>
The client browser already knows its abilities, and can choose the rendering method it considers to be the best. MathJax can even choose between MathML and HTML+CSS <i>at page rendering time</i>, showing MathML on fancier browsers and simpler HTML where it is not available.
</li>
</ul>
<div class="Unindented">
It also brings some disadvantages:
</div>
<ul>

<li>
JavaScript code can only be loaded from the server originating the page. This means that you cannot host your pages e.g. at www.myserver.com and MathJax at www.mymathjaxserver.com.
</li>
<li>
As a consequence, everyone publishing eLyXer pages converted with <tt>--mathjax</tt> needs to also host the code for MathJax, and the same for jsMath. (Web fonts used in MathJax can at least be hosted elsewhere, so publishers do not need to also host the fonts package, but this hasn’t still been used in eLyXer.)
</li>
<li>
And of course it takes some time to render everything on the client, which can degrade the user experience on older machines.
</li>
</ul>
<div class="Unindented">
Publishers should carefully consider pros and cons before deciding what to use.
</div>
<h1 class="Section">
<a class="toc" name="toc-Section-3">3</a> Work in Progress
</h1>
<div class="Unindented">
As you can see eLyXer is a mature and tried package, but it has some rough edges.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-3.1">3.1</a> Known Issues
</h2>
<div class="Unindented">
The following issues (including bugs and missing features) are acknowledged. Some of them should be solved soon; others may take longer.
</div>
<ol>

<li>
On Mac OS X the output of a message with Unicode characters may cause an error. Workaround: run <tt>elyxer.py</tt> with the <tt>--quiet</tt> option.
</li>
<li>
Some phonetic alphabet symbols are not well supported — if generated with LyX they only appear in a different color: <span class="formula"><span class="text"><span class="textipa">[sample]</span></span></span>. 
</li>
<li>
Multi-column layouts are lost. This one is almost impossible to get right in CSS, so there are no plans to even try.
</li>
<li>
BibTeX support is not quite complete. (Bear in mind that the current approach using templates can be improved, but it will never be perfect.)
</li>
<li>
ERT (bare TeX code) is ignored.
</li>
<li>
Many AMS environments (like <tt>alignat</tt>, <tt>gather</tt>…) are not working or look strange — some non-AMS environments too.
</li>
<li>
Images are never scaled above their nominal resolution. This is seldom needed if at all, so there are no plans to change it; if people really need the feature just let the author know so it can be added as an option.
</li>
</ol>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-3.2">3.2</a> Contact Information
</h2>
<div class="Unindented">
If your problem does not appear in the above list, please let the author know; you can find him at <a class="URL" href="mailto:mailto:elyxer@gmail.com">elyxer@gmail.com</a>. In the words of Rich Talley: “the tool’s author really likes getting challenging documents and making eLyXer work with them”. You can send your sample documents and we will try to make eLyXer convert them acceptably. Any documents sent will be treated with the utmost confidentiality.
</div>
<div class="Indented">
You can also join the <a class="URL" href="http://lists.nongnu.org/mailman/listinfo/elyxer-users">mailing list</a> to discuss any information related to eLyXer. The author monitors the official LyX lists for mentions of eLyXer. Bugs can also be reported at the <a class="URL" href="https://savannah.nongnu.org/bugs/?func=additem&amp;group=elyxer">Savannah page</a>.
</div>
<h2 class="Subsection">
<a class="toc" name="toc-Subsection-3.3">3.3</a> Extending eLyXer
</h2>
<div class="Unindented">
eLyXer should now support most LyX features; but sometimes it will ignore a command, sometimes it will signal it, and it might even refuse to work with certain documents. What can you do if eLyXer does not work with your LyX file? Worry not! Its flexible approach to processing allows anyone to write support for the missing commands.
</div>
<div class="Indented">
eLyXer is written in Python so that it does not need to be compiled; its code is interpreted on the fly. See the accompanying <a class="URL" href="devguide.html">developer guide</a> to learn how to extend eLyXer for your own purposes. If you know how to program in Python it should not be difficult to support other LyX features. If you don’t your best bet is to ask the author.
</div>
<h1 class="Section">
<a class="toc" name="toc-Section-4">4</a> FAQ
</h1>
<div class="Description">
<span class="Description-entry">Q: </span>What versions of LyX are supported?
</div>
<div class="Description">
<span class="Description-entry">A: </span>The tool is slowly improving; it now should work with LyX versions 1.5.5 to 1.6.5. It has been tested on Linux, Mac OS X and Windows.
</div>
<div class="Description">
<span class="Description-entry">Q: </span>There are indeed <i>a ton</i> of similar projects over the web. Why add another one?
</div>
<div class="Description">
<span class="Description-entry">A: </span>The four tools supported by LyX (tex4ht, hevea, tth and latex2html) gave inferior results a couple of years ago, and were quite inflexible. The author found the need for a good converter, while at the same time acknowledging the difficulty of the problem.
</div>
<div class="Description">
<span class="Description-entry">Q: </span>Speaking of that: why build a LyX to HTML converter, instead of a more generic LaTeX to HTML converter?
</div>
<div class="Description">
<span class="Description-entry">A: </span>The problem space is quite simplified, and therefore progress is much faster. To make it even easier eLyXer has historically centered on the subset of LyX functionality that is useful to most LyX users, leaving the rest for a later stage. Nowadays eLyXer aims to support the full LyX feature set.
</div>
<div class="Description">
<span class="Description-entry">Q: </span>What can we expect from the tool in the future?
</div>
<div class="Description">
<span class="Description-entry">A: </span>eLyXer should fulfill the needs of 99% of LyX users in the short term. It has also learned a couple of tricks of its own such as page segmenting. Eventually it could be distributed along with LyX as part of the standard installer.
</div>
<div class="Description">
<span class="Description-entry">Q: </span>Why did you leave out my favorite feature <i>&lt;insert random LyX command here&gt;</i>?
</div>
<div class="Description">
<span class="Description-entry">A: </span>In short, because nobody asked for it. Every feature which has been requested (either to me personally or to the list) has been tended to, unless it was too far out or I forgot about it. At this point of development every missing LyX feature will be considered a high priority item for the next version, if at all possible to implement.
</div>
<div class="Description">
<span class="Description-entry">Q: </span>My document changed its appearance without my intervention. Was it black magic, elves or what?
</div>
<div class="Description">
<span class="Description-entry">A: </span>It probably uses the online CSS file, which is regularly updated. See section <a class="Reference" href="#sub:CSS">2.2↑</a> for details.
</div>
<div class="Description">
<span class="Description-entry">Q: </span>Why use an online CSS, instead of placing the CSS file in the same directory as the converted file?
</div>
<div class="Description">
<span class="Description-entry">A: </span>There were pros and cons. An online CSS resource allowed me to update it for everyone at the same time, but might make it more difficult for people without an internet connection; local CSS files are more flexible but can also be confusing to novice users. In the end the online solution was preferred, with the <tt>--css</tt> option as a fallback. 
</div>
<div class="Description">
<span class="Description-entry">Q: </span>My jsMath (MathJax) pages are not rendering correctly; equations are silently ignored.
</div>
<div class="Description">
<span class="Description-entry">A: </span>Check that jsMath (MathJax) is installed on the same server as your pages; for security reasons the browser’s “same-origin” policy mandates that JavaScript can only be loaded from the same site as the original page. Also make sure that JavaScript is enabled on the browser.
</div>
<div class="Description">
<span class="Description-entry">Q: </span>I found a bug, what should I do?
</div>
<div class="Description">
<span class="Description-entry">A: </span>Just send it to the author at <a class="URL" href="mailto:mailto:elyxer@gmail.com">elyxer@gmail.com</a>. You can also report it to the <a class="URL" href="https://savannah.nongnu.org/bugs/?func=additem&amp;group=elyxer">Savannah interface</a>.
</div><h1 class="biblio">Bibliography</h1>
<p class="biblio">
<span class="entry">[<a class="biblioentry" name="biblio-1">1</a>] </span>WordReference.com: “definition of elixir”, accessed March 2009. <a class="FlexURL" href="http://www.wordreference.com/definition/elixir">http://www.wordreference.com/definition/elixir</a>
</p>
<p class="biblio">
<span class="entry">[<a class="biblioentry" name="biblio-2">2</a>] </span>W3C: “XHTML™ 1.0 The Extensible HyperText Markup Language (Second Edition)”, revised 1 August 2002. <a class="FlexURL" href="http://www.w3.org/TR/xhtml1/">http://www.w3.org/TR/xhtml1/</a>
</p>
<p class="biblio">
<span class="entry">[<a class="biblioentry" name="biblio-3">3</a>] </span>W3C: “HTML 4.01 Specification”, 24 December 1999. <a class="FlexURL" href="http://www.w3.org/TR/REC-html40/">http://www.w3.org/TR/REC-html40/</a>
</p>
<p class="biblio">
<span class="entry">[<a class="biblioentry" name="biblio-4">4</a>] </span>W3C: “Markup Validation Service”, accessed March 2009. <a class="FlexURL" href="http://validator.w3.org/">http://validator.w3.org/</a>
</p>

<hr class="footer"/>
<div class="footer">
Copyright (C) 2010 Alex Fernández (elyxer@gmail.com)
</div>
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 0.98 (2010-05-13)</a> on <span class="create-date">2010-05-13T01:43:31.908211</span>
</div>
</div>
</body>
</html>
