<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<meta name="generator" content="http://www.nongnu.org/elyxer/"/>
<meta name="create-date" content="2012-05-19"/>
<link rel="stylesheet" href="http://elyxer.nongnu.org/lyx.css" type="text/css" media="all"/>
<title>Sharing Variables in Coffee Script</title>
</head>
<body>
<div id="globalWrapper">
<h1 class="title">
Sharing Variables in Coffee Script
</h1>
<div class="Unindented">
I have been hand-coding some client side validations in coffee script. And since some of the same validations get called in multiple places, I wanted a way to DRY up the code and have it more readable. 
</div>
<pre class="LyX-Code">
def something  
  if something_else
    play_ball
  end&lt;!doctype html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;body style=’background: #dAc8b0;’&gt;
    &lt;h1 style=’text-align: center; color: #79604A;’&gt;something &lt;span style=’color: #772F32; font-size: 150%; position: relative; top: 0.2ex;padding-left: 10px; padding-right: 10px;’&gt;Mindblowing&lt;/span&gt; on its way&lt;/h1&gt;
    &lt;div style=’width: 600px; margin: 0 auto;’&gt;
        &lt;p style=’text-align: center; color: #79604A;’&gt;Till then, listen to some of Sarah’s music&lt;/p&gt;
        &lt;p style=’text-align: center; color: #79604A;’&gt;--Jack Desert&lt;br&gt;208.366.6059&lt;/p&gt;
    
        &lt;div style=’padding: 10px; background: white;’&gt;
          &lt;iframe width="300" height="410" style="position: relative; display: block; width: 300px; height: 410px;" src="http://bandcamp.com/EmbeddedPlayer/v=2/album=1194116270/size=grande3/bgcol=FFFFFF/linkcol=4285BB/" allowtransparency="true" frameborder="0"&gt;&lt;a href="http://heartacre.bandcamp.com/album/climb"&gt;Climb by Heartacre&lt;/a&gt;&lt;/iframe&gt;
        &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
end<div class="listing">
<pre class="listing">hi
hithere
    and
      then
        some
end
</pre>
</div>



</pre>
<div class="Unindented">
superuser_ids = [10879, 1862]
</div>
<div class="Indented">
demo = Demo.find_by_name("H Engage @ Highmark")
</div>
<div class="Indented">
expected_count = 3106
</div>
<div class="Indented">
expected_count += superuser_ids.count
</div>
<div class="Indented">
user_ids = User.where(:demo_id =&gt; demo.id).collect {|user| user.id if user.claimed?}
</div>
<div class="Indented">
user_ids.reject! { |id| id.nil?}
</div>
<div class="Indented">
user_ids += superuser_ids
</div>
<div class="Indented">
subject = "An update on H Engage fan requests"
</div>
<div class="Indented">
plain = "Hello - \n\nOver the last few weeks, activity on H Engage has seen quite a spike. As a result, you may have received an excessive number of \"fan\" requests from people you don’t know. Please accept our apologies, we realize that this is a disruption and have taken steps to address the issue. If you find that this is still happening, please contact support@hengage.com.\n\nOf course, the purpose of H Engage is to earn points for making healthy decisions and referring friends to do the same! Though the prize round is over, you can continue playing H Engage until the end of May.\n\n\"eat fruit\"\n\n- H Engage\n\n————————"
</div>
<div class="Indented">
html = plain.gsub("\n\n", "&lt;p&gt;")
</div>
<div class="Indented">
GenericMailer::BulkSender.delay.bulk_generic_messages(user_ids, subject, plain, html) if user_ids.count == expected_count
</div>

<hr class="footer"/>
<div class="footer" id="generated-by">
Document generated by <a href="http://elyxer.nongnu.org/">eLyXer 1.2.3 (2011-08-31)</a> on <span class="create-date">2012-05-19T11:02:00.760604</span>
</div>
</div>
</body>
</html>
